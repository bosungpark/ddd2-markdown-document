JPA를 이용한 리포지터리 구현
=
리파지터리 인터페이스는 어그리거트 루트를 기준으로 작성한다.

어그리거트에서 루트 앤티티를 제외한 나머지 구성요소는 대부분 밸류이다. 루트 앤티티 이외에 다른 앤티티가 있다면 진짜 앤티티인지 의심해봐야 한다.
단순히 별도에 테이블에 있다고, 앤티티는 아니다.

밸류가 아니라 앤티티가 확실하다면, 해당 앤티티가 다른 어그리거트는 아닌지 확인 해야 한다.
자신만의 독립된 라이프사이클을 가진다면, 다른 어그리거트일 가능성이 높다.

어그리거트에 속한 객체가 밸류인지 앤티티인지 구분하는 방법은 고유 식별자를 갖는지 확인하는 것이다.
하지만 식별자를 찾을 때 매핑되는 테이블의 식별자를 어그리거트의 구성요소의 식별자와 동일한 것으로 착각하면 안된다.
별도의 테이블로 저장하고 PK가 있더라도 테이블과 매핑되는 어그리거트의 구성요소가 항상 고유 식별자를 가지는 것은 아니기 때문이다.

